name: 'Upload artifacts'
on:
  workflow_dispatch:
  push:
    branches: [main]
  pull_request:
permissions:
  contents: write


jobs:
  upload_msi_artifact:
    runs-on: "windows-latest"
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Setup Java JDK
        uses: actions/setup-java@v3
        with:
          java-version: 17
          distribution: 'temurin'
          cache: gradle
          
      - name: Build Windows artifact
        run: "bash ./CI/build_windows.sh"

          
  upload_app_image_artifact:
    runs-on: "ubuntu-latest"
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Setup Java JDK
        uses: actions/setup-java@v3
        with:
          java-version: 17
          distribution: 'temurin'
          cache: gradle
          
      - name: Build linux artifact
        run: "bash ./CI/build_linux.sh"
